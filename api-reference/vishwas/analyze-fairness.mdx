---
title: Analyze Fairness
api: POST /vishwas/analyze
description: "Run a comprehensive fairness analysis on model predictions"
---

## Request

<ParamField body="model_id" type="string" required>
  Unique identifier for your model. Used for tracking and comparison.
</ParamField>

<ParamField body="dataset" type="object" required>
  The dataset to analyze.

  <Expandable title="dataset properties">
    <ParamField body="features" type="array" required>
      List of feature names in the dataset.
    </ParamField>

    <ParamField body="data" type="array">
      2D array of feature values. Either provide `data` or `data_url`.
    </ParamField>

    <ParamField body="data_url" type="string">
      URL to a CSV or Parquet file containing the data.
    </ParamField>

    <ParamField body="predictions" type="array" required>
      Model predictions (probabilities or class labels).
    </ParamField>

    <ParamField body="actuals" type="array">
      Ground truth labels. Required for accuracy-based metrics.
    </ParamField>

    <ParamField body="protected_attributes" type="array" required>
      List of feature names to analyze for fairness.
    </ParamField>
  </Expandable>
</ParamField>

<ParamField body="metrics" type="array" default="['demographic_parity', 'equalized_odds']">
  Fairness metrics to calculate. Options:
  - `demographic_parity`
  - `equalized_odds`
  - `equal_opportunity`
  - `calibration`
  - `individual_fairness`
  - `counterfactual_fairness`
</ParamField>

<ParamField body="thresholds" type="object">
  Custom thresholds for each metric. Default is 0.8 (80%) for all metrics.
</ParamField>

<ParamField body="reference_groups" type="object">
  Specify reference groups for each protected attribute.
</ParamField>

<ParamField body="async" type="boolean" default="true">
  Whether to run analysis asynchronously. Set to `false` for small datasets (< 10,000 rows).
</ParamField>

<ParamField body="webhook_url" type="string">
  URL to receive webhook when analysis completes.
</ParamField>

## Response

<ResponseField name="id" type="string">
  Unique analysis identifier.
</ResponseField>

<ResponseField name="model_id" type="string">
  The model ID provided in the request.
</ResponseField>

<ResponseField name="status" type="string">
  Analysis status: `pending`, `processing`, `completed`, `failed`.
</ResponseField>

<ResponseField name="overall_score" type="number">
  Aggregate fairness score from 0-1.
</ResponseField>

<ResponseField name="bias_detected" type="boolean">
  Whether any metric fell below its threshold.
</ResponseField>

<ResponseField name="metrics" type="array">
  Detailed results for each fairness metric.
</ResponseField>

<ResponseField name="recommendations" type="array">
  Actionable recommendations for improving fairness.
</ResponseField>

<RequestExample>
```bash cURL
curl -X POST https://api.rotavision.com/v1/vishwas/analyze \
  -H "Authorization: Bearer rv_live_..." \
  -H "Content-Type: application/json" \
  -d '{
    "model_id": "loan-approval-v2",
    "dataset": {
      "features": ["age", "income", "credit_score", "gender", "region"],
      "data_url": "s3://my-bucket/loan-data.parquet",
      "predictions": "prediction_col",
      "actuals": "approved_col",
      "protected_attributes": ["gender", "region"]
    },
    "metrics": ["demographic_parity", "equalized_odds", "calibration"],
    "thresholds": {
      "demographic_parity": 0.85,
      "equalized_odds": 0.80
    }
  }'
```

```python Python
from rotavision import Rotavision

client = Rotavision()

analysis = client.vishwas.analyze(
    model_id="loan-approval-v2",
    dataset={
        "features": ["age", "income", "credit_score", "gender", "region"],
        "data": data_array,
        "predictions": predictions,
        "actuals": actuals,
        "protected_attributes": ["gender", "region"]
    },
    metrics=["demographic_parity", "equalized_odds", "calibration"],
    thresholds={
        "demographic_parity": 0.85,
        "equalized_odds": 0.80
    }
)

print(f"Analysis ID: {analysis.id}")
print(f"Status: {analysis.status}")
```

```typescript Node.js
import { Rotavision } from '@rotavision/sdk';

const client = new Rotavision();

const analysis = await client.vishwas.analyze({
  modelId: 'loan-approval-v2',
  dataset: {
    features: ['age', 'income', 'credit_score', 'gender', 'region'],
    data: dataArray,
    predictions: predictions,
    actuals: actuals,
    protectedAttributes: ['gender', 'region']
  },
  metrics: ['demographic_parity', 'equalized_odds', 'calibration'],
  thresholds: {
    demographic_parity: 0.85,
    equalized_odds: 0.80
  }
});

console.log(`Analysis ID: ${analysis.id}`);
console.log(`Status: ${analysis.status}`);
```
</RequestExample>

<ResponseExample>
```json 200 - Completed
{
  "id": "analysis_abc123xyz",
  "model_id": "loan-approval-v2",
  "status": "completed",
  "overall_score": 0.82,
  "bias_detected": true,
  "dataset_summary": {
    "total_rows": 50000,
    "protected_groups": {
      "gender": ["male", "female"],
      "region": ["urban", "rural", "semi-urban"]
    }
  },
  "metrics": [
    {
      "name": "demographic_parity",
      "value": 0.78,
      "threshold": 0.85,
      "status": "fail",
      "details": {
        "gender": {
          "male": 0.72,
          "female": 0.65,
          "ratio": 0.90
        },
        "region": {
          "urban": 0.75,
          "rural": 0.58,
          "semi-urban": 0.68,
          "min_ratio": 0.77
        }
      },
      "affected_groups": ["region:rural"]
    },
    {
      "name": "equalized_odds",
      "value": 0.91,
      "threshold": 0.80,
      "status": "pass",
      "details": {
        "tpr_ratio": 0.93,
        "fpr_ratio": 0.89
      }
    },
    {
      "name": "calibration",
      "value": 0.85,
      "threshold": 0.80,
      "status": "pass"
    }
  ],
  "recommendations": [
    {
      "severity": "high",
      "metric": "demographic_parity",
      "group": "region:rural",
      "message": "Rural applicants have 23% lower approval rate despite similar creditworthiness",
      "action": "Review feature weights for location-correlated variables (distance_to_branch, digital_access)",
      "impact_estimate": "+0.12 fairness score improvement"
    }
  ],
  "created_at": "2026-02-01T10:30:00Z",
  "completed_at": "2026-02-01T10:32:15Z"
}
```

```json 202 - Async Processing
{
  "id": "analysis_abc123xyz",
  "model_id": "loan-approval-v2",
  "status": "processing",
  "progress": 0,
  "estimated_completion": "2026-02-01T10:35:00Z",
  "created_at": "2026-02-01T10:30:00Z"
}
```
</ResponseExample>
